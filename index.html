<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Phaser MZ-Minimal</title>

  <link rel="stylesheet" href="./src/style.css" />

  <!-- Phaser 3 CDN -->
  <script src="https://cdn.jsdelivr.net/npm/phaser@3/dist/phaser.min.js"></script>
</head>
<body>
  <div id="game"></div>
<!-- Warning Overlay -->
<div id="warningOverlay" class="warning-overlay is-hidden" aria-hidden="true">
  <div class="warning-panel">
    <!-- 這個是「顯示用」：JS 會把打字機內容逐字塞進來 -->
    <div id="warningText" class="warning-text"></div>
    <!-- 這個是「全文來源」：文字由 HTML 管理，JS 只讀 textContent -->
    <pre id="warningFull" class="warning-full">
Warming

★溫馨提醒：遊玩過程中，請勿快速按enter鍵，以避免出現立繪跑不出來、漾漾被當抹布拖等問題。

此遊戲為低成本同人創作，純粹為愛發電，無人收錢，劇情基於古早背叛文的基礎創作
如有雷同，純屬雷同
人物在搞笑基礎上進行了一定程度的藝術加工，無cp，若感覺不適，請立刻按下右上角叉叉退出
製作組家庭幸福，父母健在，身體健康，上路遵守交通規則，無任何心理或精神疾病
此創作純為博您一笑，作品無任何暗示隱喻，不牽涉時事、政治，不代表特殊傳說作者護玄與繪師紅麟進行創作，使用素材除音樂皆來源製作組自行創作
如感覺素材有AI疑慮，皆為繪師畫工不到家之緣故
（本人與繪師關係良好，以上聲明皆經過繪師本人過目）
如果您看完這一大串聲明，您不管做什麼都會成功的！
感謝您的觀看，祝您平安喜樂！遊玩愉快！
Enter/Space繼續
    </pre>
  </div>
</div>

  <!-- 主選單預設隱藏：由 game.js 決定何時顯示（警語結束後/再次進入時） -->
  <div id="menu">
  <div class="menu-box">
    <h1 class="menu-title">主選單</h1>

    <div id="menuHelp" class="menu-help">
      ↑↓←→ 移動　Enter 確認　Esc 返回/關閉 設定：←→ 調整音量<br/>
      遊戲中：S 存檔　Q 開啟副選單　R 開主選單　
    </div>

    <div id="menuToast" class="menu-toast hide"></div>

    <button id="btnStart">開始遊戲</button>
    <button id="btnContinue">繼續遊戲</button>

    <button id="btnSettings">條件設置</button>
    <div id="settingsPanel" class="settings">
      <label>音樂 <input id="musicVol" type="range" min="0" max="1" step="0.05" value="0.8"></label>
      <label>音效 <input id="sfxVol" type="range" min="0" max="1" step="0.05" value="0.8"></label>
    </div>

    <div class="menu-hint">Esc 返回/關閉</div>
  </div>
</div>

<div id="ingameMenu" class="ingame-menu">
  <div class="panel">
    <div class="title">選單</div>
    <button id="btnSave">存檔</button>
    <button id="btnStatus">人物狀況</button>
    <button id="btnResume">返回遊戲</button>
    <div class="hint">↑↓ 選擇　Enter 確認　Esc 返回</div>
  </div>
</div>

<div id="saveConfirm" class="popup">
  <div class="panel">
    <div class="title">確定要覆蓋存檔？</div>
    <button id="btnSaveYes">確認存檔</button>
    <button id="btnSaveNo">返回</button>
  </div>
</div>

<div id="toast" class="toast">已存檔</div>

<!-- ===== Choice Popup ===== -->
<div id="choicePopup" class="popup" aria-hidden="true">
  <div class="panel">
    <div id="choiceTitle" class="title">請選擇</div>
    <div id="choiceDesc" style="opacity:.85; margin: 0 0 12px;"></div>
    <div id="choiceBtns" style="display:flex; flex-direction:column; gap:10px;"></div>
    <button id="choiceNext" style="margin-top:12px;">繼續</button>
  </div>
</div>

<div id="statusPanel" class="status-panel" aria-hidden="true">
  <div id="statusCard" class="panel">
    <div class="avatar-wrap">
      <img id="statusAvatar" src="" alt="角色頭像">
    </div>

    <div class="info">
      <div class="row"><span class="label">姓名：</span><span id="statusName"></span></div>
      <div class="row"><span class="label">種族：</span><span id="statusRace"></span></div>
      <div class="row"><span class="label">狀況：</span><span id="statusState"></span></div>
      <div class="row"><span class="label">技能：</span><span id="statusSkill"></span></div>
    </div>
  </div>
</div>

  <div id="dialog">
    <div class="dialog-left">
      <img id="dialogPortrait" src="" alt="portrait" />
    </div>

    <div class="dialog-right">
      <div class="name" id="dialogName"></div>
      <div id="dialogText"></div>
      <div class="hint">按 Enter / Space 繼續</div>
    </div>
  </div>

  <div id="endOverlay" class="end-overlay" aria-hidden="true">
    <!-- ✅ 只顯示一次的感謝名單（由 game.js 控制顯示/隱藏） -->
    <div id="endCredits" class="end-screen end-credits" aria-hidden="true">
      <div class="end-credits-inner">
        <div class="end-title">感謝</div>
        <div class="end-lines">
          <div>場景、像素、立繪：Yu Zi</div>
          <div>劇情：雪晨</div>
          <div>程式：莫含</div>
        </div>
      </div>
    </div>

    <!-- 原本的結尾畫面（按 A 重新開始） -->
    <div id="endFinal" class="end-screen end-final" aria-hidden="true">
      <div class="end-text"><h1>END - 感謝遊玩<br>(按 A 重新開始)</h1></div>
    </div>
  </div>

  <script src="./src/game.js"></script>
</body>
</html>
